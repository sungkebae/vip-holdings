<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ”¥ ì„±ê¸°ë°°ì†Œì¥ ì „ëµ | ì‹ ê·œí¸ì… ì¢…ëª©</title>
<meta property="og:title" content="ğŸ”¥ ì„±ê¸°ë°°ì†Œì¥ ì „ëµ | ì‹ ê·œí¸ì… ì¢…ëª©">
<meta property="og:description" content="VIP ì‹ ê·œí¸ì… Â· ì¬í¸ì… ì¢…ëª© í˜„í™© â€” ì‹¤ì‹œê°„ í˜„ì¬ê°€ ë°˜ì˜">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#ffffff;--sf:#f5f6f8;--sf2:#ebedf2;--bd:#d8dbe5;--tx:#1a1d27;--ts:#6b7280;--ac:#2563eb;--gn:#059669;--rd:#dc2626;--gl:#d97706}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Noto Sans KR',-apple-system,sans-serif;background:var(--bg);color:var(--tx);line-height:1.7;font-size:17px}
.ct{max-width:1400px;margin:0 auto;padding:32px 20px 80px}

/* í—¤ë” */
.hd{text-align:center;margin-bottom:24px;padding:40px 0 20px}
.hb{display:inline-flex;align-items:center;gap:6px;background:rgba(220,38,38,.1);color:var(--rd);padding:8px 18px;border-radius:20px;font-size:16px;font-weight:600;margin-bottom:16px}
.hd h1{font-size:44px;font-weight:900;margin-bottom:8px}
.hd-sub{color:var(--ts);font-size:19px}

/* ì—…ë°ì´íŠ¸ ì‹œê° */
.update-bar{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:28px;font-size:15px;color:var(--ts)}
.update-dot{width:10px;height:10px;border-radius:50%;display:inline-block;background:#94a3b8}

/* ê³µì§€ */
.notice{background:linear-gradient(135deg,#fff5f5 0%,#ffffff 40%,#f5f6ff 100%);border:1px solid rgba(220,38,38,.2);border-radius:20px;padding:36px;margin-bottom:32px;text-align:center}
.notice-bar{position:relative;width:60px;height:3px;background:linear-gradient(90deg,var(--rd),var(--gl));margin:0 auto 20px;border-radius:2px}
.notice-title{font-size:36px;font-weight:900;margin-bottom:16px}
.notice-body{font-size:18px;color:#555;line-height:2.2}
.notice-body em{font-style:normal;font-weight:800;font-size:20px}
.notice-body .hl-red{color:var(--rd)}
.notice-body .hl-gold{color:var(--gl)}
.notice-quote{margin-top:20px;padding-top:16px;border-top:1px solid rgba(220,38,38,.1);font-size:24px;color:var(--rd);font-weight:900}

/* í†µê³„ */
.sm{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:28px}
.sc{background:var(--sf);border:1px solid var(--bd);border-radius:12px;padding:20px;text-align:center}
.sc .lb{font-size:14px;color:var(--ts);font-weight:500;margin-bottom:4px}
.sc .vl{font-size:30px;font-weight:900}
.sc .sb{font-size:13px;color:var(--ts);margin-top:2px}
.green{color:var(--gn)}.red{color:var(--rd)}.blue{color:var(--ac)}.gold{color:var(--gl)}

/* í…Œì´ë¸” */
.tw{border:1px solid var(--bd);border-left:3px solid var(--rd);border-radius:14px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.04)}
.tsc{overflow-x:auto;-webkit-overflow-scrolling:touch}
table{width:100%;border-collapse:collapse;min-width:1100px}
thead th{background:var(--sf);padding:14px 10px;font-size:15px;font-weight:700;color:var(--ts);border-bottom:2px solid var(--bd);white-space:nowrap;position:sticky;top:0}
tbody td{padding:14px 10px;font-size:15px;text-align:center;border-bottom:1px solid var(--sf2);white-space:nowrap}
tbody tr:hover{background:rgba(220,38,38,.02)}

.sn{font-size:18px;font-weight:800;color:var(--tx)}
.scode{font-size:12px;color:var(--ts);margin-left:6px;font-weight:400}
.dc{color:var(--ts);font-size:14px}
.rn{font-weight:700;color:var(--ts);font-size:13px}
.avg-v{font-weight:700;color:var(--tx)}
.wt{font-size:13px;padding:3px 8px;border-radius:4px;background:rgba(37,99,235,.08);color:var(--ac);font-weight:600}
.nt{font-size:13px;color:var(--ts);max-width:200px;white-space:normal;word-break:keep-all;text-align:left}
.sell-hd{color:var(--gn) !important}

.rb{display:inline-block;padding:5px 10px;border-radius:6px;font-weight:800;font-size:15px;min-width:70px;text-align:center}
.rb.pos{background:rgba(220,38,38,.08);color:var(--rd)}
.rb.neg{background:rgba(37,99,235,.08);color:var(--ac)}
.rb.neu{background:var(--sf);color:var(--ts)}

.loading{text-align:center;padding:60px;color:var(--ts);font-size:16px}
.loading-spin{display:inline-block;width:28px;height:28px;border:3px solid var(--sf2);border-top-color:var(--rd);border-radius:50%;animation:spin .6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

@media(max-width:768px){
.ct{padding:16px 10px 60px}
.hd h1{font-size:26px}
.notice{padding:24px 16px}
.notice-title{font-size:22px}
.notice-body{font-size:15px}
.notice-body em{font-size:17px}
.notice-quote{font-size:18px}
.sm{grid-template-columns:repeat(2,1fr);gap:8px}
.sc .vl{font-size:22px}
thead th,tbody td{padding:12px 7px;font-size:14px}
.sn{font-size:16px}
.rb{font-size:14px;min-width:60px}
}
</style>
</head>
<body>
<div class="ct">

<div class="hd">
<div class="hb">ğŸ”¥ NEW PICKS</div>
<h1>ğŸ¯ ì‹ ê·œí¸ì… Â· ì¬í¸ì… ì¢…ëª©</h1>
<div class="hd-sub">ì„±ê¸°ë°°ì†Œì¥ ì „ëµ | ë‹¨ê¸°ìŠ¤ìœ™ ì‹œê·¸ë„</div>
</div>

<div class="update-bar">
<span class="update-dot" id="statusDot"></span>
<span id="updateTime">ë°ì´í„° ë¡œë”© ì¤‘...</span>
</div>

<div class="notice">
<div class="notice-bar"></div>
<div class="notice-title">ğŸ“‹ VIP ì‹ ê·œí¸ì… ì¢…ëª© í˜„í™©</div>
<div class="notice-body">
<em class="hl-red">ì‹ ê·œ ì¶”ì²œ</em> ë° <em class="hl-gold">ì¬í¸ì…</em> ì¢…ëª©ì„ ì •ë¦¬í•œ í˜ì´ì§€ì…ë‹ˆë‹¤<br>
ë§¤ìˆ˜ê°€ ëŒ€ë¹„ ì‹¤ì‹œê°„ í˜„ì¬ê°€ì™€ ìˆ˜ìµë¥ ì´ ìë™ ë°˜ì˜ë©ë‹ˆë‹¤
</div>
<div class="notice-quote">ğŸ”¥ "ì¢‹ì€ ì¢…ëª©, ì¢‹ì€ íƒ€ì´ë°"</div>
</div>

<div class="sm">
<div class="sc"><div class="lb">í¸ì… ì¢…ëª©</div><div class="vl blue" id="totalC">-</div><div class="sb" id="totalS">-</div></div>
<div class="sc"><div class="lb">í‰ê·  ìˆ˜ìµë¥ </div><div class="vl red" id="avgR">-</div><div class="sb" id="avgS">-</div></div>
<div class="sc"><div class="lb">ìˆ˜ìµ ì¢…ëª©</div><div class="vl green" id="profC">-</div><div class="sb" id="profS">-</div></div>
<div class="sc"><div class="lb">ìµœê³  ìˆ˜ìµ</div><div class="vl gold" id="maxR">-</div><div class="sb" id="maxS">-</div></div>
</div>

<div class="tw"><div class="tsc">
<table>
<thead><tr>
<th>#</th>
<th style="text-align:left">ì¢…ëª©ëª…</th>
<th>ì¶”ì²œì¼</th>
<th>ë§¤ìˆ˜ê°€</th>
<th>ì¶”ê°€ë§¤ìˆ˜</th>
<th>í‰ê· ë‹¨ê°€</th>
<th>í˜„ì¬ê°€</th>
<th>ìˆ˜ìµë¥ </th>
<th class="sell-hd">1ì°¨ ë§¤ë„</th>
<th class="sell-hd">2ì°¨ ë§¤ë„</th>
<th class="sell-hd">3ì°¨ ë§¤ë„</th>
<th>ë¹„ì¤‘</th>
<th>ë¹„ê³ </th>
</tr></thead>
<tbody id="tb">
<tr><td colspan="13" class="loading"><div class="loading-spin"></div><br>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</td></tr>
</tbody>
</table>
</div></div>

</div>

<script>
var JSON_URL = './new_prices.json';
var DATA = null;

async function loadData() {
  try {
    var resp = await fetch(JSON_URL + '?t=' + Date.now());
    if (!resp.ok) throw new Error('HTTP ' + resp.status);
    DATA = await resp.json();
    render();
    updateStatus();
  } catch (e) {
    console.error(e);
    document.getElementById('tb').innerHTML =
      '<tr><td colspan="13" style="padding:40px;text-align:center;color:var(--ts)">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</td></tr>';
  }
}

function updateStatus() {
  if (!DATA) return;
  document.getElementById('statusDot').style.background = '#94a3b8';
  document.getElementById('updateTime').textContent = DATA.updated_at + ' ê¸°ì¤€';
}

function render() {
  if (!DATA) return;
  var items = DATA.holdings;

  // í†µê³„
  var tt = 0, cnt = 0, pf = 0, mx = -Infinity, mxN = '';
  items.forEach(function(h) {
    if (h.return_pct !== null) {
      tt += h.return_pct;
      cnt++;
      if (h.return_pct > 0) pf++;
      if (h.return_pct > mx) { mx = h.return_pct; mxN = h.name; }
    }
  });

  document.getElementById('totalC').textContent = items.length + 'ì¢…ëª©';
  document.getElementById('totalS').textContent = 'ì‹ ê·œí¸ì… Â· ì¬í¸ì…';

  if (cnt > 0) {
    var av = (tt / cnt).toFixed(2);
    document.getElementById('avgR').textContent = (av >= 0 ? '+' : '') + av + '%';
    document.getElementById('avgS').textContent = cnt + 'ì¢…ëª© ê¸°ì¤€';
    document.getElementById('profC').textContent = pf + '/' + cnt;
    document.getElementById('profS').textContent = 'ìŠ¹ë¥  ' + (pf / cnt * 100).toFixed(0) + '%';
    if (mx > -Infinity) {
      document.getElementById('maxR').textContent = '+' + mx.toFixed(2) + '%';
      document.getElementById('maxS').textContent = mxN;
    }
  }

  // í…Œì´ë¸”
  var html = '';
  items.forEach(function(h, i) {
    var buy = h.buy_price || 0;
    var add = h.add_buy || 0;
    var avg = h.avg_price || 0;
    var cur = h.cur_price || 0;

    var buyH = buy > 0 ? '<span style="font-weight:600">' + buy.toLocaleString() + '</span>' : '<span style="color:var(--ts)">-</span>';
    var addH = add > 0 ? '<span style="font-weight:600">' + add.toLocaleString() + '</span>' : '<span style="color:var(--ts)">-</span>';
    var avgH = avg > 0 ? '<span class="avg-v">' + avg.toLocaleString() + 'ì›</span>' : '<span style="color:var(--ts)">-</span>';
    var curH = cur > 0 ? '<span style="color:var(--gl);font-weight:600">' + cur.toLocaleString() + '</span>' : '<span style="color:var(--ts)">-</span>';

    var retH = '<span class="rb neu">-</span>';
    if (h.return_pct !== null) {
      var r = h.return_pct;
      retH = '<span class="rb ' + (r >= 0 ? 'pos' : 'neg') + '">' + (r >= 0 ? '+' : '') + r.toFixed(2) + '%</span>';
    }

    var s1H = h.sell_1 ? '<span style="font-weight:600">' + h.sell_1 + '</span>' : '<span style="color:var(--ts)">-</span>';
    var s2H = h.sell_2 ? '<span style="font-weight:600">' + h.sell_2 + '</span>' : '<span style="color:var(--ts)">-</span>';
    var s3H = h.sell_3 ? '<span style="font-weight:600">' + h.sell_3 + '</span>' : '<span style="color:var(--ts)">-</span>';

    html += '<tr>' +
      '<td class="rn">' + (i + 1) + '</td>' +
      '<td style="text-align:left"><span class="sn">' + h.name + '</span><span class="scode">' + h.code + '</span></td>' +
      '<td class="dc">' + h.rec_date.substring(5) + '</td>' +
      '<td>' + buyH + '</td>' +
      '<td>' + addH + '</td>' +
      '<td>' + avgH + '</td>' +
      '<td>' + curH + '</td>' +
      '<td>' + retH + '</td>' +
      '<td>' + s1H + '</td>' +
      '<td>' + s2H + '</td>' +
      '<td>' + s3H + '</td>' +
      '<td><span class="wt">' + h.weight + '</span></td>' +
      '<td class="nt">' + (h.note || '-') + '</td>' +
      '</tr>';
  });

  document.getElementById('tb').innerHTML = html;
}

loadData();
</script>
</body>
</html>
